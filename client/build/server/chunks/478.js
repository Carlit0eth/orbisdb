"use strict";exports.id=478,exports.ids=[478],exports.modules={2478:(t,s,n)=>{n.d(s,{Z:()=>AddContextModal});var a=n(997),l=n(6689),i=n(6640),o=n(662),r=n(7737),c=n(5620),x=n(8709),d=n(3279),u=n(9239);function AddContextModal({hide:t,parentContext:s}){let[n,i]=(0,l.useState)(1);return a.jsx(o.Z,{hide:t,children:(0,a.jsxs)("div",{className:"flex flex-col justify-center",children:[a.jsx("h2",{className:"text-center font-medium mb-1",children:s?"Add a new sub-context":"Use a new context"}),a.jsx("p",{className:"text-center text-slate-500 text-base mb-2",children:"You can either create or use an existing context."}),a.jsx("div",{className:"w-full",children:a.jsx(x.Z,{steps:["Type","Details","Save in settings"],currentStep:n})}),a.jsx(AddContextSteps,{step:n,setStep:i,parentContext:s,hide:t})]})})}let AddContextSteps=({step:t,setStep:s,hide:n,parentContext:o})=>{let{orbis:x,setSettings:m}=(0,l.useContext)(i.k),[p,f]=(0,l.useState)(null),[h,C]=(0,l.useState)(""),[g,j]=(0,l.useState)(""),[b,w]=(0,l.useState)(""),[S,v]=(0,l.useState)(d.Q_.ACTIVE),[N,y]=(0,l.useState)(d.Q_.ACTIVE),[_,A]=(0,l.useState)();async function loadContextDetails(){v(d.Q_.LOADING);try{let t=await x.ceramic.loadStream(h);if(console.log("stream.state:",t.state),t){let n={name:t.state.content.name,description:t.state.content.description,stream_id:h};A(n),v(d.Q_.SUCCESS),await (0,d._v)(500),s(3),v(d.Q_.ACTIVE)}else alert("Error loading context details."),console.log("Error loading context details and adding it to the settings file:",e),v(d.Q_.ERROR),await (0,d._v)(500),v(d.Q_.ACTIVE)}catch(t){alert("Couldn't load context details."),console.log("Error adding new context to the settings file:",t),v(d.Q_.ERROR),await (0,d._v)(500),v(d.Q_.ACTIVE)}}switch(t){case 1:return a.jsx("div",{className:"flex flex-col items-center",children:(0,a.jsxs)("div",{className:"space-y-2 flex flex-col mb-4 text-base mt-2 w-full",children:[a.jsx(ContextOption,{title:"Use existing context",description:"Add a context you created in the past.",isSelected:"existing"===p,onSelect:()=>{f("existing"),s(2)}}),a.jsx(ContextOption,{title:"Create new context",description:"Create a new context and start using it.",isSelected:"new"===p,onSelect:()=>{f("new"),s(2)}})]})});case 2:if("existing"==p)return(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[a.jsx("input",{type:"text",placeholder:"Context ID",className:"bg-white w-full mt-2 px-2 py-1 rounded-md border border-slate-300 text-base text-slate-900 mb-2",onChange:t=>C(t.target.value),value:h}),a.jsx(r.Z,{type:"primary",onClick:()=>(function(){if(2===t)switch(p){case"existing":if(""==h||!h){alert("Context ID can't be empty.");return}loadContextDetails();break;case"new":createNewContext()}})(),status:S,title:"Next"})]});if("new"==p)return a.jsx(c.Z,{callback:n,parentContext:o});case 3:return(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[a.jsx("p",{className:"text-base text-slate-900 mb-3 text-center",children:"We are now going to save this new context in your settings."}),a.jsx("div",{className:"w-full mb-3",children:a.jsx(u.ZP,{context:_})}),a.jsx(r.Z,{type:"primary",onClick:()=>saveInSettings(),status:S,title:"Save"})]})}},ContextOption=({title:t,description:s,isSelected:n,onSelect:l})=>(0,a.jsxs)("div",{className:`rounded-md border border-slate-200 px-4 py-3 flex flex-col ${n?"bg-[#eef5ff] border-[#4483fd] border":"hover:bg-slate-50"} cursor-pointer`,onClick:l,children:[a.jsx("p",{className:`font-medium ${n?"text-slate-800":"text-slate-900"}`,children:t}),a.jsx("p",{className:"text-slate-600",children:s})]})}};